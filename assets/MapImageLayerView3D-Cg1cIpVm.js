import{e as t,m as r,h as a,gW as p,T as m}from"./index-FjkLmFqq.js";import{m as n}from"./DynamicLayerView3D-B3EFF7NG.js";import{m as l}from"./SublayerPopupHighlightHelper3D-CwMWD6a-.js";import{i as h}from"./timeSupport-CdPa6w-O.js";import"./SubView3D-DZwTkDMo.js";import"./ImageMaterial.glsl-UwXj5GSK.js";import"./TriangleMaterial-D8j278z7.js";import"./DefaultLayouts-D_5QC3IU.js";import"./LayerView3D-BPXNJxsy.js";import"./LayerView-BgTeTvUs.js";import"./RefreshableLayerView-xRdlVzTI.js";import"./ImageHighlightHelper3D-CQn71Uf8.js";import"./utils-DecFH9K9.js";const u=i=>{const s=i;let e=class extends s{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}get timeExtent(){return h(this.layer,this.view?.timeExtent,this._get("timeExtent"))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return t([r()],e.prototype,"exportImageParameters",void 0),t([r({readOnly:!0})],e.prototype,"floors",null),t([r({readOnly:!0})],e.prototype,"exportImageVersion",null),t([r()],e.prototype,"layer",void 0),t([r()],e.prototype,"suspended",void 0),t([r({readOnly:!0})],e.prototype,"timeExtent",null),e=t([a("esri.views.layers.MapImageLayerView")],e),e};let o=class extends u(n){constructor(){super(...arguments),this.type="map-image-3d"}initialize(){this._updatingHandles.add(()=>this.exportImageVersion,()=>this._updatingHandles.addPromise(this.refreshDebounced())),this._popupHighlightHelper=new l({view:this.view,layerView:this,updatingHandles:this._updatingHandles}),this.addHandles(m(this._popupHighlightHelper))}fetchPopupFeaturesAtLocation(i,s){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(i,s)}highlight(i,s){return this._popupHighlightHelper.highlight(i,s)}getFetchOptions(){return{timeExtent:this.timeExtent,scale:this.view.scale}}};o=t([a("esri.views.3d.layers.MapImageLayerView3D")],o);const V=o;export{V as default};
