import{e as t,m as r,h as a,gW as p,T as m}from"./index-B9VIL3e7.js";import{m as n}from"./DynamicLayerView3D-BKP8dzfH.js";import{m as l}from"./SublayerPopupHighlightHelper3D-C8nSeLsH.js";import{i as h}from"./timeSupport-D2E-ODX-.js";import"./SubView3D-C8cM8MqG.js";import"./ImageMaterial.glsl-CvYaigl7.js";import"./TriangleMaterial-BnyE3hVB.js";import"./DefaultLayouts-DjizznTj.js";import"./LayerView3D-CvglZQJN.js";import"./LayerView-D9_Pl3yT.js";import"./RefreshableLayerView-B3uUNyfN.js";import"./ImageHighlightHelper3D-DiB9XCiu.js";import"./utils-BJyoDuBg.js";const u=i=>{const s=i;let e=class extends s{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}get timeExtent(){return h(this.layer,this.view?.timeExtent,this._get("timeExtent"))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return t([r()],e.prototype,"exportImageParameters",void 0),t([r({readOnly:!0})],e.prototype,"floors",null),t([r({readOnly:!0})],e.prototype,"exportImageVersion",null),t([r()],e.prototype,"layer",void 0),t([r()],e.prototype,"suspended",void 0),t([r({readOnly:!0})],e.prototype,"timeExtent",null),e=t([a("esri.views.layers.MapImageLayerView")],e),e};let o=class extends u(n){constructor(){super(...arguments),this.type="map-image-3d"}initialize(){this._updatingHandles.add(()=>this.exportImageVersion,()=>this._updatingHandles.addPromise(this.refreshDebounced())),this._popupHighlightHelper=new l({view:this.view,layerView:this,updatingHandles:this._updatingHandles}),this.addHandles(m(this._popupHighlightHelper))}fetchPopupFeaturesAtLocation(i,s){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(i,s)}highlight(i,s){return this._popupHighlightHelper.highlight(i,s)}getFetchOptions(){return{timeExtent:this.timeExtent,scale:this.view.scale}}};o=t([a("esri.views.3d.layers.MapImageLayerView3D")],o);const V=o;export{V as default};
